<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Safety Plan ‚Äì Calm Hub</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,sans-serif;
      -webkit-font-smoothing:antialiased;}
    body{
      min-height:100vh;
      background:
        linear-gradient(135deg,rgba(59,130,246,0.18),rgba(52,211,153,0.16)),
        url("image.jpg");
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      background-attachment:fixed;
      padding:24px;
      color:#0f172a;
    }
    .shell{
      max-width:800px;
      margin:0 auto;
      background:rgba(255,255,255,0.96);
      backdrop-filter:blur(20px) saturate(180%);
      border-radius:28px;
      border:1px solid rgba(255,255,255,0.9);
      box-shadow:0 26px 60px rgba(15,23,42,0.2);
      padding:26px 24px 20px;
    }
    .top-row{
      display:flex;justify-content:space-between;align-items:center;
      gap:16px;margin-bottom:14px;flex-wrap:wrap;
    }
    .logo-row{display:flex;align-items:center;gap:10px;}
    .dot{
      width:20px;height:20px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#6ee7b7,#22c55e);
      box-shadow:0 0 0 6px rgba(16,185,129,0.22);
    }
    .title-main{font-size:22px;font-weight:700;}
    .subtitle{font-size:13px;color:#6b7280;}
    .back-chip{
      padding:8px 16px;border-radius:999px;
      border:1px solid #e5e7eb;background:#ffffff;
      font-size:13px;color:#4b5563;text-decoration:none;
      display:inline-flex;align-items:center;gap:6px;
      box-shadow:0 4px 10px rgba(148,163,184,0.3);
    }
    .info-box{
      margin-bottom:14px;
      padding:10px 12px;
      border-radius:16px;
      background:#eff6ff;
      border:1px solid #bfdbfe;
      font-size:13px;
      color:#1d4ed8;
    }
    .section-title{
      font-size:14px;font-weight:700;color:#374151;
      margin:12px 0 6px;
    }
    textarea{
      width:100%;
      min-height:70px;
      border-radius:14px;
      border:1px solid #e5e7eb;
      padding:8px 10px;
      font-size:13px;
      resize:vertical;
      background:#f9fafb;
      color:#111827;
      outline:none;
    }
    textarea:focus{
      border-color:#60a5fa;
      box-shadow:0 0 0 1px rgba(59,130,246,0.45);
      background:#ffffff;
    }
    .hint{font-size:11px;color:#9ca3af;margin-top:3px;}
    .btn-row{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .btn-primary{
      padding:9px 18px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#22c55e,#3b82f6);
      color:#f9fafb;
      font-size:13px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 10px 26px rgba(34,197,94,0.45);
      display:inline-flex;align-items:center;gap:6px;
    }
    .btn-secondary{
      padding:8px 14px;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      color:#4b5563;
      font-size:12px;
      font-weight:500;
      cursor:pointer;
    }
    .status{
      font-size:12px;
      color:#6b7280;
      margin-top:6px;
    }
    .footer-note{
      margin-top:14px;
      font-size:11px;
      color:#9ca3af;
      text-align:center;
    }
    @media(max-width:640px){
      body{padding:16px;}
      .shell{padding:22px 18px 18px;border-radius:22px;}
      .btn-row{flex-direction:column-reverse;align-items:stretch;}
      .btn-primary,.btn-secondary{justify-content:center;width:100%;}
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="top-row">
      <div class="logo-row">
        <div class="dot"></div>
        <div>
          <div class="title-main">My Safety Plan</div>
          <div class="subtitle">Write a few steps that help you stay safe when things feel intense.</div>
        </div>
      </div>
      <a href="sos.html" class="back-chip">‚Üê Back to SOS</a>
    </div>

    <div class="info-box">
      This plan is saved only on your device (not uploaded). You can change or clear it anytime.
    </div>

    <div>
      <div class="section-title">1. Early warning signs</div>
      <textarea id="fieldSigns" placeholder="Example: I stop replying to people, I feel numb, my chest feels tight..."></textarea>
      <div class="hint">How do you usually know a crisis might be starting?</div>

      <div class="section-title">2. Things that help a little</div>
      <textarea id="fieldCoping" placeholder="Example: Splash water on face, 2‚Äëmin breathing, listening to one calm song..."></textarea>
      <div class="hint">Small actions that make things even 5% easier.</div>

      <div class="section-title">3. People and places that feel safe</div>
      <textarea id="fieldSupport" placeholder="Example: Call my cousin, message close friend, sit in the living room with family..."></textarea>
      <div class="hint">You can include names (no need for phone numbers if you don‚Äôt want to).</div>

      <div class="section-title">4. What I will do first in a crisis</div>
      <textarea id="fieldSteps" placeholder="Example: 1) Open SOS page, 2) Do 2‚Äëmin breathing, 3) Call Tele MANAS or 108 if I still feel unsafe."></textarea>
      <div class="hint">Simple, clear steps you can follow when you feel at risk.</div>
    </div>

    <div class="btn-row">
      <button class="btn-secondary" id="clearBtn">Clear plan</button>
      <button class="btn-primary" id="saveBtn">üíæ Save safety plan</button>
    </div>
    <div class="status" id="statusText">Not saved yet.</div>

    <div class="footer-note">
      This is not a medical plan, but a personal note to yourself. For emergencies, use the numbers on the SOS page.
    </div>
  </div>

  <script>
    const KEY = "calmSafetyPlanV1";
    const signsEl = document.getElementById("fieldSigns");
    const copingEl = document.getElementById("fieldCoping");
    const supportEl = document.getElementById("fieldSupport");
    const stepsEl = document.getElementById("fieldSteps");
    const saveBtn = document.getElementById("saveBtn");
    const clearBtn = document.getElementById("clearBtn");
    const statusText = document.getElementById("statusText");

    function loadPlan() {
      try {
        const raw = localStorage.getItem(KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        signsEl.value = data.signs || "";
        copingEl.value = data.coping || "";
        supportEl.value = data.support || "";
        stepsEl.value = data.steps || "";
        if (data.updatedAt) {
          statusText.textContent = "Last saved: " + new Date(data.updatedAt).toLocaleString();
        }
      } catch(e) {
        console.error(e);
      }
    }

    function savePlan() {
      const data = {
        signs: signsEl.value.trim(),
        coping: copingEl.value.trim(),
        support: supportEl.value.trim(),
        steps: stepsEl.value.trim(),
        updatedAt: new Date().toISOString()
      };
      localStorage.setItem(KEY, JSON.stringify(data));
      statusText.textContent = "Saved just now.";
      setTimeout(() => {
        statusText.textContent = "Last saved: " + new Date(data.updatedAt).toLocaleString();
      }, 1200);
    }

    function clearPlan() {
      if (!confirm("Clear your saved safety plan from this device?")) return;
      localStorage.removeItem(KEY);
      signsEl.value = "";
      copingEl.value = "";
      supportEl.value = "";
      stepsEl.value = "";
      statusText.textContent = "Plan cleared from this device.";
    }

    saveBtn.addEventListener("click", savePlan);
    clearBtn.addEventListener("click", clearPlan);
    loadPlan();
  </script>
</body>
</html>
